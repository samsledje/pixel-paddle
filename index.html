<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelPaddle</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Font Awesome for footer icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-papmQn1+Z1Qw1Qn1+Z1Qw1Qn1+Z1Qw1Qn1+Z1Qw1Qn1+Z1Qw1Qn1+Z1Qw1Qn1+Z1Qw1Qn1+Z1Qw1Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="game-logo-container">
        <!-- Embedded SVG with CSS variables for dynamic colors -->
        <svg width="400" height="200" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg" class="game-logo">
            <!-- Background -->
            <rect x="0" y="0" width="400" height="200" rx="20" ry="20" fill="#1a1a2e" />
            
            <!-- Pixel Grid Paddle Left - Will be populated dynamically -->
            <g transform="translate(50, 75)" class="player1-elements">
                <!-- Paddle elements will be added here by JavaScript -->
            </g>
            
            <!-- Pixel Grid Paddle Right - Will be populated dynamically -->
            <g transform="translate(310, 75)" class="player2-elements">
                <!-- Paddle elements will be added here by JavaScript -->
            </g>
            
            <!-- Ball -->
            <circle cx="200" cy="100" r="12" fill="white" />
            
            <!-- Text "PIXEL" -->
            <text x="110" y="85" font-family="'Press Start 2P', monospace" font-size="32" fill="var(--player1-color, #00ffff)" text-anchor="start">PIXEL</text>
            
            <!-- Text "PADDLE" -->
            <text x="290" y="125" font-family="'Press Start 2P', monospace" font-size="32" fill="var(--player2-color, #ff00ff)" text-anchor="end">PADDLE</text>
            
            <!-- Center Line -->
            <line x1="200" y1="20" x2="200" y2="180" stroke="#444" stroke-width="4" stroke-dasharray="8 8" />
        </svg>
    </div>
    
    <div id="setupScreen" class="setup-screen">
        <div class="instructions">
            <p><strong>Design Your Paddles!</strong></p>
            <p>Click on grid squares to toggle individual pixels, or <strong>click and drag</strong> to draw/erase multiple pixels at once. Different shapes affect ball physics!</p>
        </div>
        
        <div class="paddle-editors">
            <div class="paddle-editor">
                <div class="player-title">Player 1 Paddle</div>
                <div id="paddleGrid1" class="grid"></div>
                <div class="paddle-preview-container">
                    <svg id="paddlePreview1" width="80" height="80" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="paddle-preview"></svg>
                </div>
                <div class="preset-buttons">
                    <button onclick="loadPreset('rectangle', 1)">Rectangle</button>
                    <button onclick="loadPreset('diamond', 1)">Diamond</button>
                    <button onclick="loadPreset('cross', 1)">Cross</button>
                    <button onclick="loadPreset('circle', 1)">Circle</button>
                    <button onclick="clearGrid(1)">Clear</button>
                </div>
            </div>
            
            <div class="paddle-editor player2">
                <div class="player-title">Player 2 Paddle</div>
                <div id="paddleGrid2" class="grid"></div>
                <div class="paddle-preview-container">
                    <svg id="paddlePreview2" width="80" height="80" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="paddle-preview"></svg>
                </div>
                <div class="preset-buttons">
                    <button onclick="loadPreset('rectangle', 2)">Rectangle</button>
                    <button onclick="loadPreset('diamond', 2)">Diamond</button>
                    <button onclick="loadPreset('cross', 2)">Cross</button>
                    <button onclick="loadPreset('circle', 2)">Circle</button>
                    <button onclick="clearGrid(2)">Clear</button>
                </div>
            </div>
        </div>
        
        <div class="settings-panel">
            <div class="settings-header" onclick="toggleSettings()">
                <span><strong>⚙️ Game Settings</strong></span>
                <span class="settings-toggle">▼</span>
            </div>
            <div class="settings-content" id="settingsContent">
                <div class="settings">
                    <div class="setting-group">
                        <label>Ball Speed</label>
                        <input type="range" id="ballSpeed" min="1" max="5" value="2" step="0.5" title="Ball Speed">
                        <span id="ballSpeedValue">2</span>
                    </div>
                    <div class="setting-group">
                        <label>Paddle Scale</label>
                        <input type="range" id="paddleScale" min="0.5" max="3" value="1" step="0.5" title="Paddle Scale">
                        <span id="paddleScaleValue">1x</span>
                    </div>
                    <div class="setting-group">
                        <label>Win Score</label>
                        <input type="number" id="winScore" min="3" max="21" value="11" title="Win Score">
                    </div>
                    <div class="setting-group">
                        <label>Speed Increase</label>
                        <input type="checkbox" id="speedIncrease" checked title="Speed Increase">
                        <span>Ball speeds up</span>
                    </div>
                    <div class="setting-group">
                        <label>AI Difficulty</label>
                        <input type="range" id="aiDifficulty" min="1" max="10" value="5" step="1" title="AI Difficulty">
                        <span id="aiDifficultyValue">5 - Normal</span>
                    </div>
                    <div class="setting-group">
                        <label>Player 1 Color</label>
                        <input type="color" id="player1Color" value="#00ffff" class="color-picker" title="Player 1 Color">
                    </div>
                    <div class="setting-group">
                        <label>Player 2 Color</label>
                        <input type="color" id="player2Color" value="#ff00ff" class="color-picker" title="Player 2 Color">
                    </div>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button onclick="startGame(false)">Start 1 Player (vs AI)</button>
            <button onclick="startGame(true)">Start 2 Player</button>
        </div>
        
        <div class="instructions">
            <p><strong>Controls:</strong></p>
            <p>Player 1: WASD keys | Player 2: IJKL keys</p>
            <p>Paddles move in 2D within their boundary areas. The ball responds to the shape and angle of your paddle!</p>
        </div>
    </div>

    <div id="gameContainer" class="game-container hidden">
        <canvas id="gameCanvas" width="900" height="500"></canvas>
        <div class="game-info">
            <div id="gameMode">1 Player vs AI</div>
            <div>Press ESC to return to setup</div>
            <div>Ball Speed: <span id="currentSpeed">2.0</span></div>
        </div>
        <div class="score">
            <div>Player 1: <span id="score1">0</span></div>
            <div>Player 2: <span id="score2">0</span></div>
            <div>First to: <span id="targetScore">11</span></div>
        </div>
        <div id="gameOver" class="game-over hidden">
            <h2 id="winnerText">Player 1 Wins!</h2>
            <p>Final Score: <span id="finalScore"></span></p>
            <button onclick="returnToSetup()">Back to Setup</button>
            <button onclick="restartGame()">Play Again</button>
        </div>
    </div>

        <footer class="footer-small">
            <div class="footer-links">
                <a href="https://github.com/samsledje/pixel-paddle" target="_blank" rel="noopener noreferrer" title="View on GitHub">
                    <svg class="footer-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
                <!-- <span class="footer-sep">|</span>
                <a href="./privacy-policy.html" target="_blank" rel="noopener noreferrer" title="Privacy Policy">
                    <svg class="footer-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.4 16,13V16C16,17.4 15.4,18 14.8,18H9.2C8.6,18 8,17.4 8,16V13C8,12.4 8.6,11.5 9.2,11.5V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,10V11.5H13.5V10C13.5,8.7 12.8,8.2 12,8.2Z"/>
                    </svg>
                </a> -->
                <span class="footer-sep">|</span>
                <a href="https://samsl.io" target="_blank" rel="noopener noreferrer" title="Visit samsl.io">
                    <svg class="footer-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                </a>
            </div>
        </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <script src="js/game.js"></script>

</body>
</html>